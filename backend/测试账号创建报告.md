# æµ‹è¯•è´¦å·åˆ›å»ºå®ŒæˆæŠ¥å‘Š

**åˆ›å»ºæ—¶é—´**: 2026-01-28 10:25  
**çŠ¶æ€**: âœ… è„šæœ¬å’Œé…ç½®å·²å®Œæˆ  

---

## ğŸ“‹ å·²å®Œæˆçš„å·¥ä½œ

### 1. ä¿®æ”¹æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ âœ…
**æ–‡ä»¶**: `backend/init_db.py`

**ä¿®æ”¹å†…å®¹**:
- âœ… æ·»åŠ æµ‹è¯•è´¦å·ï¼šç”¨æˆ·å`admin`ï¼Œå¯†ç `admin`
- âœ… åˆ›å»ºå­¦ç”Ÿæ¡£æ¡ˆï¼šå§“å"æµ‹è¯•å­¦ç”Ÿ"ï¼Œå­¦å·TEST001
- âœ… ä¿®æ”¹ç®¡ç†å‘˜è´¦å·ä¸º`sysadmin`ä»¥é¿å…å†²çª
- âœ… æ›´æ–°æç¤ºä¿¡æ¯ï¼Œæ¸…æ™°æ˜¾ç¤ºæ‰€æœ‰æµ‹è¯•è´¦å·

### 2. åˆ›å»ºå¿«é€Ÿæµ‹è¯•è„šæœ¬ âœ…
**æ–‡ä»¶**: `backend/create_test_account.py`

**åŠŸèƒ½**:
- æ£€æŸ¥è´¦å·æ˜¯å¦å·²å­˜åœ¨
- åˆ›å»ºadmin/adminæµ‹è¯•è´¦å·
- æ˜¾ç¤ºå‹å¥½çš„åˆ›å»ºæˆåŠŸä¿¡æ¯

### 3. åˆ›å»ºPowerShellå¯åŠ¨è„šæœ¬ âœ…
**æ–‡ä»¶**: `backend/CreateTestAccount.ps1`

**åŠŸèƒ½**:
- è‡ªåŠ¨æ£€æµ‹è™šæ‹Ÿç¯å¢ƒ
- è¿è¡ŒPythonè„šæœ¬åˆ›å»ºè´¦å·
- æ˜¾ç¤ºæ‰§è¡Œç»“æœ

### 4. åˆ›å»ºè¯¦ç»†ä½¿ç”¨æŒ‡å— âœ…
**æ–‡ä»¶**: `backend/åˆ›å»ºæµ‹è¯•è´¦å·æŒ‡å—.md`

**åŒ…å«å†…å®¹**:
- 3ç§åˆ›å»ºè´¦å·çš„æ–¹æ³•
- æ‰€æœ‰æµ‹è¯•è´¦å·ä¿¡æ¯
- å¸¸è§é—®é¢˜è§£ç­”
- æ‰‹åŠ¨SQLåˆ›å»ºæ–¹æ³•
- é¡¹ç›®å¯åŠ¨æµ‹è¯•æ­¥éª¤

---

## ğŸ“ æµ‹è¯•è´¦å·ä¿¡æ¯

### ä¸»è¦æµ‹è¯•è´¦å·ï¼ˆæ¨èä½¿ç”¨ï¼‰
```
ç”¨æˆ·å: admin
å¯†ç :   admin
è§’è‰²:   å­¦ç”Ÿ
å§“å:   æµ‹è¯•å­¦ç”Ÿ
å­¦å·:   TEST001
```

### å…¶ä»–å¯ç”¨è´¦å·
- **ç³»ç»Ÿç®¡ç†å‘˜**: `sysadmin` / `admin123`
- **å­¦ç”Ÿ1**: `student001` / `password123` (å¼ ä¸‰)
- **å­¦ç”Ÿ2**: `student002` / `password123` (æå››)

---

## ğŸš€ å¦‚ä½•åˆ›å»ºæµ‹è¯•è´¦å·

### æ–¹æ³•1: åˆå§‹åŒ–å®Œæ•´æ•°æ®åº“ï¼ˆæ¨èï¼‰

```powershell
# 1. æ‰“å¼€PowerShell
# 2. è¿›å…¥backendç›®å½•
cd d:\student_system\backend

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.\.venv\Scripts\activate

# 4. è¿è¡Œåˆå§‹åŒ–è„šæœ¬
python init_db.py
```

è¿™å°†åˆ›å»ºæ‰€æœ‰è¡¨å¹¶æ·»åŠ æ‰€æœ‰æµ‹è¯•æ•°æ®ã€‚

### æ–¹æ³•2: åªåˆ›å»ºadminè´¦å·

```powershell
cd d:\student_system\backend
.\.venv\Scripts\activate
python create_test_account.py
```

### æ–¹æ³•3: ä½¿ç”¨PowerShellè„šæœ¬

```powershell
cd d:\student_system\backend
.\CreateTestAccount.ps1
```

---

## âœ… éªŒè¯æµç¨‹

### 1. ç¡®è®¤æ•°æ®åº“è¿æ¥
```powershell
# æ£€æŸ¥MySQLæœåŠ¡
Get-Service -Name MySQL*

# åº”è¯¥çœ‹åˆ°MySQLæœåŠ¡çŠ¶æ€ä¸ºRunning
```

### 2. æµ‹è¯•è´¦å·åˆ›å»º
è¿è¡Œä¸Šè¿°ä»»ä¸€æ–¹æ³•åˆ›å»ºè´¦å·ã€‚

### 3. å¯åŠ¨åç«¯æœåŠ¡
```powershell
cd d:\student_system\backend
.\.venv\Scripts\activate
python -m uvicorn main:app --reload
```

åº”è¯¥çœ‹åˆ°ï¼š
```
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete.
```

### 4. å¯åŠ¨å‰ç«¯æœåŠ¡
```powershell
cd d:\student_system\frontend
npm run dev
```

åº”è¯¥çœ‹åˆ°ï¼š
```
  VITE v4.x.x  ready in xxx ms

  âœ  Local:   http://localhost:5173/
```

### 5. æµ‹è¯•ç™»å½•
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5173
2. ç‚¹å‡»"å­¦ç”Ÿç™»å½•"æˆ–ç›´æ¥è®¿é—®ç™»å½•é¡µ
3. è¾“å…¥ç”¨æˆ·å: `admin`
4. è¾“å…¥å¯†ç : `admin`
5. ç‚¹å‡»ç™»å½•

**é¢„æœŸç»“æœ**: 
- âœ… ç™»å½•æˆåŠŸ
- âœ… è·³è½¬åˆ°å­¦ç”Ÿä»ªè¡¨æ¿
- âœ… ä¾§è¾¹æ æ˜¾ç¤º"æµ‹è¯•å­¦ç”Ÿ"
- âœ… Tokenä¿å­˜åˆ°localStorage

---

## ğŸ”§ å¦‚æœåˆ›å»ºå¤±è´¥

### æ£€æŸ¥æ¸…å•

#### 1. MySQLæœåŠ¡æ˜¯å¦è¿è¡Œï¼Ÿ
```powershell
Get-Service MySQL* | Select-Object Name, Status
```

#### 2. æ•°æ®åº“æ˜¯å¦å­˜åœ¨ï¼Ÿ
```sql
-- ç™»å½•MySQL
mysql -u root -p

-- æ£€æŸ¥æ•°æ®åº“
SHOW DATABASES;

-- å¦‚æœæ²¡æœ‰student_systemï¼Œåˆ›å»ºå®ƒ
CREATE DATABASE student_system CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### 3. .envé…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ
æ£€æŸ¥ `backend/.env` æ–‡ä»¶ï¼š
```env
DATABASE_URL=mysql+pymysql://root:password067517@localhost:3306/student_system
```

ç¡®ä¿ï¼š
- ç”¨æˆ·åæ­£ç¡®ï¼ˆrootï¼‰
- å¯†ç æ­£ç¡®ï¼ˆpassword067517ï¼‰
- ç«¯å£æ­£ç¡®ï¼ˆ3306ï¼‰
- æ•°æ®åº“åæ­£ç¡®ï¼ˆstudent_systemï¼‰

#### 4. è™šæ‹Ÿç¯å¢ƒæ˜¯å¦æ­£ç¡®ï¼Ÿ
```powershell
cd d:\student_system\backend
.\.venv\Scripts\activate
python -c "import pymysql; print('PyMySQL OK')"
```

---

## ğŸ“ æ‰‹åŠ¨SQLåˆ›å»ºï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰

å¦‚æœPythonè„šæœ¬æ— æ³•è¿è¡Œï¼Œå¯ä»¥æ‰‹åŠ¨åœ¨MySQLä¸­æ‰§è¡Œï¼š

```sql
USE student_system;

-- 1. åˆ›å»ºç”¨æˆ·è¡¨ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
CREATE TABLE IF NOT EXISTS sys_user (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    role ENUM('student', 'admin') NOT NULL,
    avatar_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 2. åˆ›å»ºå­¦ç”Ÿè¡¨ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
CREATE TABLE IF NOT EXISTS sys_student (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT UNIQUE NOT NULL,
    student_id VARCHAR(20) UNIQUE NOT NULL,
    name VARCHAR(50) NOT NULL,
    class_name VARCHAR(50),
    major VARCHAR(100),
    email VARCHAR(100),
    phone VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES sys_user(id) ON DELETE CASCADE
);

-- 3. æ’å…¥æµ‹è¯•ç”¨æˆ·ï¼ˆå¯†ç hashæ˜¯'admin'çš„bcryptåŠ å¯†ï¼‰
-- æ³¨æ„ï¼šè¿™ä¸ªhashå¯¹åº”å¯†ç 'admin'
INSERT INTO sys_user (username, password_hash, role, avatar_url) 
VALUES ('admin', '$2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TIbMrJQIqvBOziFXNKnr6ZqK6Jqm', 'student', NULL);

-- 4. è·å–ç”¨æˆ·IDå¹¶åˆ›å»ºå­¦ç”Ÿæ¡£æ¡ˆ
SET @user_id = LAST_INSERT_ID();

INSERT INTO sys_student (user_id, student_id, name, class_name, major, email, phone)
VALUES (@user_id, 'TEST001', 'æµ‹è¯•å­¦ç”Ÿ', 'æµ‹è¯•ç­çº§', 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯', 'test@example.com', '13800138000');

-- 5. éªŒè¯åˆ›å»ºæˆåŠŸ
SELECT 
    u.id, u.username, u.role, 
    s.student_id, s.name, s.class_name, s.major
FROM sys_user u
LEFT JOIN sys_student s ON u.id = s.user_id
WHERE u.username = 'admin';
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

è´¦å·åˆ›å»ºåï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æµ‹è¯•ï¼š

1. **å¯åŠ¨åç«¯**
   ```powershell
   cd d:\student_system\backend
   .\.venv\Scripts\activate
   python -m uvicorn main:app --reload
   ```

2. **å¯åŠ¨å‰ç«¯**
   ```powershell
   cd d:\student_system\frontend
   npm run dev
   ```

3. **ç™»å½•æµ‹è¯•**
   - è®¿é—® http://localhost:5173
   - ä½¿ç”¨ admin/admin ç™»å½•
   - æµ‹è¯•å„é¡¹åŠŸèƒ½

4. **åŠŸèƒ½éªŒè¯**
   - [ ] ç™»å½•æˆåŠŸ
   - [ ] ä¾§è¾¹æ æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
   - [ ] å¯ä»¥è®¿é—®ä»ªè¡¨æ¿
   - [ ] å¯ä»¥æŸ¥çœ‹æˆæœåˆ—è¡¨
   - [ ] å¯ä»¥ä½¿ç”¨AIå¯¹è¯
   - [ ] å¯ä»¥æŸ¥çœ‹è¯¾ç¨‹åˆ—è¡¨

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ `backend/åˆ›å»ºæµ‹è¯•è´¦å·æŒ‡å—.md` è·å–è¯¦ç»†è¯´æ˜
2. æ£€æŸ¥åç«¯æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚
4. ç¡®è®¤æ•°æ®åº“è¿æ¥æ­£å¸¸

---

**åˆ›å»ºå®Œæˆ**: æ‰€æœ‰è„šæœ¬å’Œæ–‡æ¡£å·²å‡†å¤‡å°±ç»ªï¼  
**ä¸‹ä¸€æ­¥**: è¿è¡Œ `python init_db.py` åˆ›å»ºæ•°æ®åº“å’Œæµ‹è¯•è´¦å·
