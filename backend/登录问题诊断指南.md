# ç™»å½•é—®é¢˜å¿«é€Ÿè¯Šæ–­æŒ‡å—

## ğŸ” é—®é¢˜ï¼šstudent001 æ— æ³•ç™»å½•

### å¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ

#### 1ï¸âƒ£ è´¦å·ä¸å­˜åœ¨
**æ£€æŸ¥æ–¹æ³•ï¼š**
```bash
# åœ¨ backend ç›®å½•ä¸‹è¿è¡Œ
python check_student001.py
```

**å¦‚æœæ˜¾ç¤º"ç”¨æˆ·ä¸å­˜åœ¨"ï¼š**
```bash
# åˆ›å»ºæµ‹è¯•è´¦å·
python create_test_account.py
```

---

#### 2ï¸âƒ£ å¯†ç ä¸æ­£ç¡®
**é»˜è®¤å¯†ç åº”è¯¥æ˜¯ï¼š** `password123`

**å¦‚æœå¯†ç ä¸å¯¹ï¼Œé‡ç½®å¯†ç ï¼š**
```sql
-- ä½¿ç”¨ MySQL å®¢æˆ·ç«¯æˆ– phpMyAdmin æ‰§è¡Œ
USE student_system;

-- æŸ¥çœ‹å½“å‰ç”¨æˆ·
SELECT id, username, role FROM sys_user WHERE username = 'student001';

-- é‡ç½®å¯†ç ä¸º 'password123' (Argon2 å“ˆå¸Œ)
UPDATE sys_user 
SET password_hash = '$argon2id$v=19$m=65536,t=3,p=4$...' 
WHERE username = 'student001';
```

æˆ–ä½¿ç”¨ Python è„šæœ¬é‡ç½®ï¼š
```python
from auth import get_password_hash
new_hash = get_password_hash("password123")
print(new_hash)
# ç„¶åæ‰‹åŠ¨æ›´æ–°æ•°æ®åº“
```

---

#### 3ï¸âƒ£ æ•°æ®éªŒè¯é—®é¢˜
**æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦ç¬¦åˆéªŒè¯è§„åˆ™ï¼š**

ç”¨æˆ·åè§„åˆ™ï¼š
- âœ… é•¿åº¦ï¼š3-50 å­—ç¬¦
- âœ… æ ¼å¼ï¼šåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è¿å­—ç¬¦
- âŒ ä¸èƒ½æœ‰ç‰¹æ®Šå­—ç¬¦

å¯†ç è§„åˆ™ï¼š
- âœ… é•¿åº¦ï¼š6-128 å­—ç¬¦
- âœ… ä¼šè‡ªåŠ¨å»é™¤é¦–å°¾ç©ºæ ¼

`student001` å’Œ `password123` éƒ½ç¬¦åˆè§„åˆ™ âœ…

---

#### 4ï¸âƒ£ å‰ç«¯è¿æ¥é—®é¢˜

**æ£€æŸ¥å‰ç«¯æ˜¯å¦æ­£ç¡®è¿æ¥åˆ°åç«¯ï¼š**

1. **åç«¯æ˜¯å¦è¿è¡Œï¼Ÿ**
   ```bash
   # è®¿é—®
   http://localhost:8000/docs
   
   # åº”è¯¥çœ‹åˆ° API æ–‡æ¡£é¡µé¢
   ```

2. **å‰ç«¯ API é…ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ**
   ```javascript
   // æ£€æŸ¥å‰ç«¯ä»£ç ä¸­çš„ API åŸºç¡€ URL
   const BASE_URL = 'http://localhost:8000/api/v1'
   ```

3. **æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ï¼Ÿ**
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
   - æŸ¥çœ‹ Console æ ‡ç­¾é¡µ
   - æŸ¥çœ‹ Network æ ‡ç­¾é¡µçš„è¯·æ±‚

---

#### 5ï¸âƒ£ åç«¯æœªé‡å¯
**ä¼˜åŒ–ä»£ç åéœ€è¦é‡å¯åç«¯ï¼š**

```bash
# åœæ­¢å½“å‰åç«¯ï¼ˆCtrl+Cï¼‰

# é‡æ–°å¯åŠ¨
cd d:\student_system\backend
uvicorn main:app --reload
```

---

#### 6ï¸âƒ£ å¯†ç å“ˆå¸Œé—®é¢˜

**æ£€æŸ¥å¯†ç å“ˆå¸Œæ ¼å¼ï¼š**

ç™»å½•åˆ° MySQLï¼š
```sql
USE student_system;

SELECT 
    username, 
    SUBSTRING(password_hash, 1, 20) as hash_prefix,
    LENGTH(password_hash) as hash_length
FROM sys_user 
WHERE username = 'student001';
```

**é¢„æœŸç»“æœï¼š**
- Bcrypt æ ¼å¼ï¼š`$2b$12$...` (çº¦60å­—ç¬¦)
- Argon2 æ ¼å¼ï¼š`$argon2id$v=19$...` (çº¦100å­—ç¬¦)

å¦‚æœå“ˆå¸Œæ ¼å¼å¼‚å¸¸ï¼Œéœ€è¦é‡æ–°è®¾ç½®å¯†ç ã€‚

---

## ğŸš€ å¿«é€Ÿæ“ä½œæ­¥éª¤

### æ­¥éª¤ 1: ç¡®è®¤åç«¯è¿è¡Œ
```bash
# è®¿é—®åç«¯å¥åº·æ£€æŸ¥
curl http://localhost:8000/
# åº”è¯¥è¿”å› {"message": "Student System API"}
```

### æ­¥éª¤ 2: æµ‹è¯•ç™»å½• API
```bash
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"student001","password":"password123"}'
```

**é¢„æœŸæˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "access_token": "eyJ...",
    "refresh_token": "eyJ...",
    "token_type": "bearer",
    "userInfo": {
      "id": 1,
      "name": "å¼ ä¸‰",
      "role": "student"
    }
  }
}
```

**å¦‚æœè¿”å› 401ï¼š**
- å¯†ç é”™è¯¯
- è´¦å·ä¸å­˜åœ¨

**å¦‚æœè¿”å› 500ï¼š**
- åç«¯æœ‰é”™è¯¯
- æŸ¥çœ‹åç«¯æ§åˆ¶å°æ—¥å¿—

**å¦‚æœè¿”å› 422ï¼š**
- æ•°æ®éªŒè¯å¤±è´¥
- æ£€æŸ¥ç”¨æˆ·å/å¯†ç æ ¼å¼

---

## ğŸ“Š è¯Šæ–­æ£€æŸ¥è¡¨

- [ ] åç«¯æ­£å¸¸è¿è¡Œ (http://localhost:8000)
- [ ] è´¦å·å­˜åœ¨äºæ•°æ®åº“
- [ ] å¯†ç æ­£ç¡®
- [ ] å¯†ç å“ˆå¸Œæ ¼å¼æ­£å¸¸
- [ ] å‰ç«¯è¿æ¥åˆ°æ­£ç¡®çš„åç«¯åœ°å€
- [ ] æµè§ˆå™¨æ—  CORS é”™è¯¯
- [ ] åç«¯æ§åˆ¶å°æ— é”™è¯¯æ—¥å¿—

---

## ğŸ’¡ æœ€å¸¸è§çš„é—®é¢˜

### é—®é¢˜ 1: è´¦å·ä¸å­˜åœ¨
**è§£å†³ï¼š** è¿è¡Œ `python create_test_account.py`

### é—®é¢˜ 2: åç«¯æœªè¿è¡Œ
**è§£å†³ï¼š** `uvicorn main:app --reload`

### é—®é¢˜ 3: å‰ç«¯æœªè¿æ¥åˆ°åç«¯
**è§£å†³ï¼š** æ£€æŸ¥å‰ç«¯ API é…ç½®

### é—®é¢˜ 4: ä»£ç æ›´æ–°åæœªé‡å¯
**è§£å†³ï¼š** é‡å¯åç«¯å’Œå‰ç«¯

---

## ğŸ”§ æ‰‹åŠ¨åˆ›å»ºè´¦å·

å¦‚æœè‡ªåŠ¨è„šæœ¬ä¸å·¥ä½œï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼š

```sql
USE student_system;

-- 1. åˆ›å»ºç³»ç»Ÿç”¨æˆ·
INSERT INTO sys_user (username, password_hash, role) VALUES
('student001', '$argon2id$v=19$m=65536,t=3,p=4$your_hash_here', 'student');

-- 2. è·å–åˆšåˆ›å»ºçš„ç”¨æˆ·ID
SET @user_id = LAST_INSERT_ID();

-- 3. åˆ›å»ºå­¦ç”Ÿä¿¡æ¯
INSERT INTO student (user_id, student_id, name, class_name) VALUES
(@user_id, '2021001', 'å¼ ä¸‰', 'è®¡ç®—æœº1ç­');
```

**è·å–å¯†ç å“ˆå¸Œï¼š**
```python
# åœ¨ Python ä¸­è¿è¡Œ
from auth import get_password_hash
hash = get_password_hash("password123")
print(hash)
# å¤åˆ¶è¾“å‡ºçš„å“ˆå¸Œå€¼åˆ° SQL ä¸­
```

---

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½ä¸è¡Œï¼Œè¯·æä¾›ï¼š
1. åç«¯æ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—
2. æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
3. Network æ ‡ç­¾é¡µä¸­ç™»å½•è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯
