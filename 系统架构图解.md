# ç³»ç»Ÿæ¶æ„å¯è§†åŒ–å›¾è§£

## ğŸ“ æ•´ä½“ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯åº”ç”¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  å­¦ç”Ÿç«¯ç•Œé¢   â”‚  â”‚  ç®¡ç†å‘˜ç•Œé¢   â”‚  â”‚  å…¬å…±ç»„ä»¶     â”‚          â”‚
â”‚  â”‚  - æˆæœæäº¤   â”‚  â”‚  - æˆæœå®¡æ ¸   â”‚  â”‚  - ç™»å½•       â”‚          â”‚
â”‚  â”‚  - AIå¯¹è¯    â”‚  â”‚  - æ•°æ®ç»Ÿè®¡   â”‚  â”‚  - æ–‡ä»¶ä¸Šä¼    â”‚          â”‚
â”‚  â”‚  - ç”»åƒæŸ¥çœ‹   â”‚  â”‚  - ç”¨æˆ·ç®¡ç†   â”‚  â”‚  - æ•™å¸ˆé€‰æ‹©   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP/JSON + JWT Token
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FastAPI åç«¯åº”ç”¨                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    è·¯ç”±å±‚ (Routers)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ auth â”‚  â”‚commonâ”‚  â”‚studentâ”‚ â”‚ adminâ”‚  â”‚certificateâ”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  æœåŠ¡å±‚ (Services)                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ File Managerâ”‚  â”‚ Certificate  â”‚  â”‚ Image Process â”‚  â”‚   â”‚
â”‚  â”‚  â”‚             â”‚  â”‚ Recognition  â”‚  â”‚               â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                æ•°æ®è®¿é—®å±‚ (SQLAlchemy ORM)                â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚  Models   â”‚  â”‚  Schemas  â”‚  â”‚ Dependencies â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ SQL Queries
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MySQL æ•°æ®åº“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚sys_users â”‚  â”‚sys_studentsâ”‚ â”‚biz_achievementsâ”‚ â”‚sys_teachersâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ai_chat_sessionsâ”‚  â”‚ai_chat_messagesâ”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  å¤–éƒ¨AIæœåŠ¡       â”‚
                         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                         â”‚  â”‚é˜¿é‡Œäº‘é€šä¹‰åƒé—®â”‚  â”‚
                         â”‚  â”‚qwen-vl-max â”‚  â”‚
                         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â–²
                                 â”‚ HTTP API
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Certificate Recognition â”‚
                    â”‚      Service            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ APIè¯·æ±‚æµç¨‹å›¾

### 1. ç”¨æˆ·ç™»å½•æµç¨‹

```
å‰ç«¯                     åç«¯                    æ•°æ®åº“
 â”‚                        â”‚                        â”‚
 â”œâ”€â‘  POST /auth/loginâ”€â”€â”€â”€â–ºâ”‚                        â”‚
 â”‚  {username, password}  â”‚                        â”‚
 â”‚                        â”œâ”€â‘¡ æŸ¥è¯¢ç”¨æˆ·â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                        â”‚  WHERE username=?      â”‚
 â”‚                        â”‚â—„â”€â‘¢ è¿”å›ç”¨æˆ·è®°å½•â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                        â”‚                        â”‚
 â”‚                        â”œâ”€â‘£ éªŒè¯å¯†ç  (bcrypt)    â”‚
 â”‚                        â”‚                        â”‚
 â”‚                        â”œâ”€â‘¤ ç”ŸæˆJWT Token        â”‚
 â”‚                        â”‚    (åŒ…å«user_id+role)  â”‚
 â”‚                        â”‚                        â”‚
 â”‚â—„â”€â‘¥ è¿”å›Token+UserInfoâ”€â”¤                        â”‚
 â”‚  {token, userInfo}     â”‚                        â”‚
 â”‚                        â”‚                        â”‚
 â”œâ”€â‘¦ ä¿å­˜åˆ°localStorage   â”‚                        â”‚
 â”‚                        â”‚                        â”‚
 â”œâ”€â‘§ è·³è½¬åˆ°å¯¹åº”ç•Œé¢       â”‚                        â”‚
 â”‚   (student/admin)      â”‚                        â”‚
 â”‚                        â”‚                        â”‚
```

---

### 2. è¯ä¹¦è¯†åˆ«ä¸æˆæœæäº¤æµç¨‹

```
å‰ç«¯                     åç«¯                    AIæœåŠ¡              æ•°æ®åº“
 â”‚                        â”‚                        â”‚                   â”‚
 â”œâ”€â‘  ä¸Šä¼ è¯ä¹¦å›¾ç‰‡â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚                   â”‚
 â”‚  POST /student/ocr/recognize                                        â”‚
 â”‚  multipart/form-data   â”‚                        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘¡ ä¿å­˜æ–‡ä»¶              â”‚                   â”‚
 â”‚                        â”‚  uploads/students/1/   â”‚                   â”‚
 â”‚                        â”‚  certificates/uuid.jpg â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘¢ å›¾åƒé¢„å¤„ç†            â”‚                   â”‚
 â”‚                        â”‚  (å‹ç¼©ã€æ ¼å¼è½¬æ¢)        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘£ è°ƒç”¨AIè¯†åˆ«â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
 â”‚                        â”‚  POST /v1/chat/        â”‚                   â”‚
 â”‚                        â”‚  completions           â”‚                   â”‚
 â”‚                        â”‚  {model, messages}     â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”‚â—„â”€â‘¤ è¿”å›è¯†åˆ«ç»“æœâ”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
 â”‚                        â”‚  {parsed JSON}         â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚â—„â”€â‘¥ è¿”å›è¯†åˆ«æ•°æ®+URLâ”€â”€â”€â”€â”¤                        â”‚                   â”‚
 â”‚  {recognized_data,     â”‚                        â”‚                   â”‚
 â”‚   file_url}            â”‚                        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”œâ”€â‘¦ ç”¨æˆ·ç¡®è®¤/ä¿®æ”¹æ•°æ®     â”‚                        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”œâ”€â‘§ æäº¤æˆæœâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚                   â”‚
 â”‚  POST /student/        â”‚                        â”‚                   â”‚
 â”‚  achievements          â”‚                        â”‚                   â”‚
 â”‚  {title, type,         â”‚                        â”‚                   â”‚
 â”‚   teacher_id,          â”‚                        â”‚                   â”‚
 â”‚   evidence_url}        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘¨ éªŒè¯teacher_idâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”‚â—„â”€â‘© æ•™å¸ˆå­˜åœ¨â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘ª éªŒè¯æ–‡ä»¶è®¿é—®æƒé™      â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘« æ’å…¥æˆæœè®°å½•â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                        â”‚  INSERT INTO           â”‚                   â”‚
 â”‚                        â”‚  biz_achievements      â”‚                   â”‚
 â”‚                        â”‚  status=pending        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚â—„â”€â‘¬ è¿”å›æˆåŠŸâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚                   â”‚
 â”‚  {achievement_id}      â”‚                        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
```

---

### 3. æˆæœå®¡æ ¸æµç¨‹

```
ç®¡ç†å‘˜                   åç«¯                    æ•°æ®åº“
 â”‚                        â”‚                        â”‚
 â”œâ”€â‘  è·å–å¾…å®¡æ ¸åˆ—è¡¨â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
 â”‚  GET /admin/achievements?status=pending         â”‚
 â”‚                        â”‚                        â”‚
 â”‚                        â”œâ”€â‘¡ JOINæŸ¥è¯¢â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                        â”‚  SELECT a.*, s.name,   â”‚
 â”‚                        â”‚  t.name FROM           â”‚
 â”‚                        â”‚  biz_achievements a    â”‚
 â”‚                        â”‚  JOIN sys_students s   â”‚
 â”‚                        â”‚  JOIN sys_teachers t   â”‚
 â”‚                        â”‚  WHERE status=pending  â”‚
 â”‚                        â”‚                        â”‚
 â”‚                        â”‚â—„â”€â‘¢ è¿”å›è®°å½•åˆ—è¡¨â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                        â”‚                        â”‚
 â”‚â—„â”€â‘£ è¿”å›åˆ—è¡¨æ•°æ®â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
 â”‚  {list, total}         â”‚                        â”‚
 â”‚                        â”‚                        â”‚
 â”œâ”€â‘¤ æ˜¾ç¤ºåˆ—è¡¨             â”‚                        â”‚
 â”‚   (å­¦ç”Ÿåã€æˆæœã€è¯ä¹¦)  â”‚                        â”‚
 â”‚                        â”‚                        â”‚
 â”œâ”€â‘¥ ç‚¹å‡»å®¡æ ¸æŒ‰é’®         â”‚                        â”‚
 â”‚                        â”‚                        â”‚
 â”œâ”€â‘¦ æäº¤å®¡æ ¸ç»“æœâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚
 â”‚  PATCH /admin/         â”‚                        â”‚
 â”‚  achievements/123/auditâ”‚                        â”‚
 â”‚  {action: "approve",   â”‚                        â”‚
 â”‚   comment: "ä¼˜ç§€"}     â”‚                        â”‚
 â”‚                        â”‚                        â”‚
 â”‚                        â”œâ”€â‘§ æ›´æ–°æˆæœçŠ¶æ€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                        â”‚  UPDATE biz_achievementsâ”‚
 â”‚                        â”‚  SET status=approved   â”‚
 â”‚                        â”‚  WHERE id=123          â”‚
 â”‚                        â”‚                        â”‚
 â”‚                        â”œâ”€â‘¨ æ¸…ç©ºç”»åƒç¼“å­˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                        â”‚  UPDATE sys_students   â”‚
 â”‚                        â”‚  SET persona_cache=NULLâ”‚
 â”‚                        â”‚  WHERE id=student_id   â”‚
 â”‚                        â”‚                        â”‚
 â”‚â—„â”€â‘© è¿”å›æˆåŠŸâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
 â”‚  {msg: "approved"}     â”‚                        â”‚
 â”‚                        â”‚                        â”‚
```

---

### 4. AIå¯¹è¯æµç¨‹

```
å­¦ç”Ÿ                     åç«¯                    æ•°æ®åº“              LLMæœåŠ¡
 â”‚                        â”‚                        â”‚                   â”‚
 â”œâ”€â‘  å‘é€æ¶ˆæ¯â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                        â”‚                   â”‚
 â”‚  POST /student/ai/chat â”‚                        â”‚                   â”‚
 â”‚  {session_id: null,    â”‚                        â”‚                   â”‚
 â”‚   message: "é—®é¢˜"}     â”‚                        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘¡ åˆ›å»ºæ–°ä¼šè¯â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
 â”‚                        â”‚  INSERT INTO           â”‚                   â”‚
 â”‚                        â”‚  ai_chat_sessions      â”‚                   â”‚
 â”‚                        â”‚  id=UUID               â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘¢ ä¿å­˜ç”¨æˆ·æ¶ˆæ¯â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
 â”‚                        â”‚  INSERT INTO           â”‚                   â”‚
 â”‚                        â”‚  ai_chat_messages      â”‚                   â”‚
 â”‚                        â”‚  role=user             â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘£ æŸ¥è¯¢å†å²æ¶ˆæ¯â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
 â”‚                        â”‚  SELECT * FROM messagesâ”‚                   â”‚
 â”‚                        â”‚  WHERE session_id      â”‚                   â”‚
 â”‚                        â”‚  ORDER BY created_at   â”‚                   â”‚
 â”‚                        â”‚  LIMIT 10              â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”‚â—„â”€â‘¤ è¿”å›å†å²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘¥ æŸ¥è¯¢å­¦ç”Ÿæˆæœâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
 â”‚                        â”‚  SELECT * FROM         â”‚                   â”‚
 â”‚                        â”‚  biz_achievements      â”‚                   â”‚
 â”‚                        â”‚  WHERE student_id      â”‚                   â”‚
 â”‚                        â”‚  AND status=approved   â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”‚â—„â”€â‘¦ è¿”å›æˆæœåˆ—è¡¨â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘§ æ„å»ºä¸Šä¸‹æ–‡            â”‚                   â”‚
 â”‚                        â”‚  (å†å²+æˆæœ)            â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘¨ è°ƒç”¨LLM APIâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                        â”‚  POST /v1/chat/        â”‚                   â”‚
 â”‚                        â”‚  completions           â”‚                   â”‚
 â”‚                        â”‚  {messages: [...]}     â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”‚â—„â”€â‘© è¿”å›AIå›å¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚                        â”œâ”€â‘ª ä¿å­˜AIæ¶ˆæ¯â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
 â”‚                        â”‚  INSERT INTO           â”‚                   â”‚
 â”‚                        â”‚  ai_chat_messages      â”‚                   â”‚
 â”‚                        â”‚  role=assistant        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
 â”‚â—„â”€â‘« è¿”å›AIå›å¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚                   â”‚
 â”‚  {session_id, message} â”‚                        â”‚                   â”‚
 â”‚                        â”‚                        â”‚                   â”‚
```

---

## ğŸ—„ï¸ æ•°æ®åº“ERå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   sys_users      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id           â”‚â”€â”€â”€â”
â”‚ UQ  username     â”‚   â”‚
â”‚     password_hashâ”‚   â”‚ 1:1
â”‚     role    [FK] â”‚   â”‚
â”‚     avatar_url   â”‚   â”‚
â”‚     created_at   â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sys_students    â”‚          â”‚  sys_teachers    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id           â”‚â”€â”€â”€â”  â”Œâ”€â”€â”€â”‚ PK  id           â”‚
â”‚ FK  user_id [UQ] â”‚   â”‚  â”‚   â”‚     name         â”‚
â”‚ UQ  student_numberâ”‚  â”‚  â”‚   â”‚     title        â”‚
â”‚     name         â”‚   â”‚  â”‚   â”‚     department   â”‚
â”‚     major        â”‚   â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚     persona_cacheâ”‚   â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚             â”‚ 1:N
        â”‚              â”‚  â”‚             â”‚
        â”‚ 1:N          â”‚  â”‚             â”‚
        â”‚              â”‚  â”‚ N:1         â”‚
        â”‚              â”‚  â”‚             â”‚
        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚    â”‚  biz_achievements    â”‚â—„â”€â”€â”˜
        â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚    â”‚ PK  id               â”‚
        â”‚    â”‚ FK  student_id  [IDX]â”‚
        â”‚    â”‚ FK  teacher_id  [IDX]â”‚
        â”‚    â”‚     title            â”‚
        â”‚    â”‚     type             â”‚
        â”‚    â”‚     content_json     â”‚
        â”‚    â”‚     evidence_url     â”‚
        â”‚    â”‚ IDX status           â”‚
        â”‚    â”‚     audit_comment    â”‚
        â”‚    â”‚ IDX created_at       â”‚
        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ai_chat_sessions  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id (UUID)    â”‚â”€â”€â”€â”
â”‚ FK  student_id   â”‚   â”‚
â”‚     title        â”‚   â”‚
â”‚     updated_at   â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                       â”‚ 1:N
                       â”‚
                       â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ai_chat_messages  â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
               â”‚ PK  id           â”‚
               â”‚ FK  session_id   â”‚
               â”‚     role         â”‚
               â”‚     content      â”‚
               â”‚     created_at   â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å›¾ä¾‹**:
- `PK`: Primary Key (ä¸»é”®)
- `FK`: Foreign Key (å¤–é”®)
- `UQ`: Unique (å”¯ä¸€çº¦æŸ)
- `IDX`: Index (ç´¢å¼•)

---

## ğŸ” è®¤è¯ä¸æˆæƒæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     JWT Token ç”Ÿæˆ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·ç™»å½•
    â”‚
    â”œâ”€â–º éªŒè¯ç”¨æˆ·åå¯†ç 
    â”‚
    â”œâ”€â–º ç”ŸæˆToken Payload:
    â”‚     {
    â”‚       "sub": "user_id",      // ä¸»ä½“ï¼ˆç”¨æˆ·IDï¼‰
    â”‚       "role": "student",     // è§’è‰²
    â”‚       "exp": 1706486400      // è¿‡æœŸæ—¶é—´ï¼ˆ24å°æ—¶åï¼‰
    â”‚     }
    â”‚
    â”œâ”€â–º ä½¿ç”¨SECRET_KEYç­¾å (HS256)
    â”‚
    â””â”€â–º è¿”å›Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     è¯·æ±‚è®¤è¯æµç¨‹                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®¢æˆ·ç«¯è¯·æ±‚
    â”‚
    â”‚ Headers: Authorization: Bearer <token>
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Depends(           â”‚
â”‚  get_current_user)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â‘  ä»Headeræå–Token
       â”‚
       â”œâ”€â‘¡ ä½¿ç”¨SECRET_KEYéªŒè¯ç­¾å
       â”‚
       â”œâ”€â‘¢ æ£€æŸ¥è¿‡æœŸæ—¶é—´
       â”‚
       â”œâ”€â‘£ è§£æPayloadè·å–user_id
       â”‚
       â”œâ”€â‘¤ ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·
       â”‚
       â””â”€â‘¥ è¿”å›Userå¯¹è±¡
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Depends(        â”‚
    â”‚  require_student)â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â‘  éªŒè¯ user.role == "student"
           â”‚
           â”œâ”€â‘¡ æŸ¥è¯¢å…³è”çš„SysStudentè®°å½•
           â”‚
           â””â”€â‘¢ è¿”å›SysStudentå¯¹è±¡
               â”‚
               â–¼
          ä¸šåŠ¡é€»è¾‘å¤„ç†
```

---

## ğŸ“‚ æ–‡ä»¶å­˜å‚¨ç»“æ„

```
project_root/
â”‚
â””â”€â”€ uploads/
    â”œâ”€â”€ students/                    # å­¦ç”Ÿæ–‡ä»¶ç›®å½•
    â”‚   â”œâ”€â”€ 1/                       # student_id = 1
    â”‚   â”‚   â””â”€â”€ certificates/
    â”‚   â”‚       â”œâ”€â”€ uuid-1.jpg
    â”‚   â”‚       â”œâ”€â”€ uuid-2.png
    â”‚   â”‚       â””â”€â”€ uuid-3.pdf
    â”‚   â”‚
    â”‚   â”œâ”€â”€ 2/                       # student_id = 2
    â”‚   â”‚   â””â”€â”€ certificates/
    â”‚   â”‚       â””â”€â”€ uuid-4.jpg
    â”‚   â”‚
    â”‚   â””â”€â”€ .../
    â”‚
    â””â”€â”€ temp_certificates/           # ä¸´æ—¶æ–‡ä»¶ï¼ˆè¯†åˆ«ååˆ é™¤ï¼‰
        â”œâ”€â”€ temp-uuid-1.jpg
        â””â”€â”€ temp-uuid-2.png
```

**è®¿é—®æ§åˆ¶é€»è¾‘**:
```python
# URLæ ¼å¼: /uploads/students/{student_id}/certificates/{filename}

if current_user.role == "student":
    # å­¦ç”Ÿåªèƒ½è®¿é—®è‡ªå·±çš„æ–‡ä»¶
    if url_student_id != current_user.student.id:
        return 403 Forbidden
        
elif current_user.role == "admin":
    # ç®¡ç†å‘˜å¯ä»¥è®¿é—®æ‰€æœ‰æ–‡ä»¶
    pass
```

---

## ğŸ¯ ä¸­é—´ä»¶æ‰§è¡Œé¡ºåº

```
å®¢æˆ·ç«¯è¯·æ±‚
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CORSMiddleware     â”‚  â‘  å¤„ç†è·¨åŸŸè¯·æ±‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Certificate         â”‚  â‘¡ éªŒè¯è¯ä¹¦æ–‡ä»¶è®¿é—®æƒé™
â”‚ AccessMiddleware    â”‚     (ä»…/uploads/students/*è·¯å¾„)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·¯ç”±åŒ¹é…           â”‚  â‘¢ FastAPIè·¯ç”±åˆ†å‘
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¾èµ–æ³¨å…¥           â”‚  â‘£ æ‰§è¡ŒDepends()
â”‚  - get_db          â”‚     - æ•°æ®åº“ä¼šè¯
â”‚  - get_current_userâ”‚     - ç”¨æˆ·è®¤è¯
â”‚  - require_student â”‚     - è§’è‰²éªŒè¯
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸šåŠ¡é€»è¾‘å¤„ç†       â”‚  â‘¤ è·¯ç”±å¤„ç†å‡½æ•°
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å“åº”åºåˆ—åŒ–         â”‚  â‘¥ Pydanticæ¨¡å‹åºåˆ—åŒ–
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
    è¿”å›ç»™å®¢æˆ·ç«¯
```

---

## ğŸ§© ä¾èµ–å…³ç³»å›¾

```
main.py
  â”‚
  â”œâ”€â–º config.py (settings)
  â”‚
  â”œâ”€â–º database.py (init_db, get_db)
  â”‚     â””â”€â–º models.py
  â”‚
  â”œâ”€â–º routers/
  â”‚     â”œâ”€â–º auth.py
  â”‚     â”‚     â”œâ”€â–º auth.py (verify_password, create_access_token)
  â”‚     â”‚     â”œâ”€â–º schemas.py (LoginRequest, LoginResponse)
  â”‚     â”‚     â””â”€â–º utils.py (success_response, error_response)
  â”‚     â”‚
  â”‚     â”œâ”€â–º common.py
  â”‚     â”‚     â”œâ”€â–º dependencies.py (get_current_user)
  â”‚     â”‚     â””â”€â–º schemas.py (TeacherResponse, UploadResponse)
  â”‚     â”‚
  â”‚     â”œâ”€â–º student.py
  â”‚     â”‚     â”œâ”€â–º dependencies.py (require_student)
  â”‚     â”‚     â”œâ”€â–º services/file_manager.py
  â”‚     â”‚     â”œâ”€â–º services/certificate_recognition_openai.py
  â”‚     â”‚     â””â”€â–º schemas.py (AchievementCreate, ChatRequest, etc.)
  â”‚     â”‚
  â”‚     â”œâ”€â–º admin.py
  â”‚     â”‚     â”œâ”€â–º dependencies.py (require_admin)
  â”‚     â”‚     â””â”€â–º schemas.py (AchievementAudit)
  â”‚     â”‚
  â”‚     â””â”€â–º certificate.py
  â”‚           â””â”€â–º services/certificate_recognition.py
  â”‚
  â””â”€â–º middleware/
        â””â”€â–º certificate_access.py
              â””â”€â–º dependencies.py (get_current_user)
```

---

## ğŸ”„ æœåŠ¡å±‚è°ƒç”¨å…³ç³»

```
routers/student.py
      â”‚
      â”œâ”€â–º POST /ocr/recognize
      â”‚     â”‚
      â”‚     â”œâ”€â–º services/file_manager.save_certificate_permanent()
      â”‚     â”‚     â””â”€â–º ä¿å­˜åˆ° uploads/students/{id}/certificates/
      â”‚     â”‚
      â”‚     â””â”€â–º services/certificate_recognition_openai.recognize_certificate()
      â”‚           â”‚
      â”‚           â”œâ”€â–º services/image_preprocessor.preprocess_image()
      â”‚           â”‚     â””â”€â–º PILå›¾åƒå¤„ç†ã€å‹ç¼©
      â”‚           â”‚
      â”‚           â””â”€â–º è°ƒç”¨é€šä¹‰åƒé—®API
      â”‚                 â””â”€â–º POST https://dashscope.aliyuncs.com/.../v1/chat/completions
      â”‚
      â””â”€â–º POST /ai/chat
            â”‚
            â””â”€â–º è°ƒç”¨LLM API (TODO)
                  â””â”€â–º POST {LLM_API_URL}
```

---

## ğŸ“Š æ•°æ®æµè½¬ç¤ºæ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯    â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  è·¯ç”±å±‚  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  æœåŠ¡å±‚  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  æ•°æ®åº“  â”‚
â”‚ (Vue.js) â”‚â—„â”€â”€â”€â”€â”€â”€â”‚(FastAPI) â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ (Logic)  â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ (MySQL)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                   â”‚                   â”‚                  â”‚
     â”‚                   â”‚                   â”‚                  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   å¤–éƒ¨AIæœåŠ¡        â”‚
                   â”‚ (é€šä¹‰åƒé—®qwen-vl)  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ•°æ®è½¬æ¢æµç¨‹**:
1. å‰ç«¯å‘é€JSON/FormData
2. Pydanticæ¨¡å‹éªŒè¯
3. ä¸šåŠ¡é€»è¾‘å¤„ç†
4. SQLAlchemy ORMæ“ä½œ
5. æ•°æ®åº“CRUD
6. Pydanticæ¨¡å‹åºåˆ—åŒ–
7. è¿”å›JSONåˆ°å‰ç«¯

---

## ğŸš€ éƒ¨ç½²æ¶æ„ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ï¼‰

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   è´Ÿè½½å‡è¡¡    â”‚
                    â”‚   (Nginx)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
          â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚FastAPI  â”‚      â”‚FastAPI  â”‚      â”‚FastAPI  â”‚
    â”‚Backend 1â”‚      â”‚Backend 2â”‚      â”‚Backend 3â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                â”‚                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚                â”‚
         â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MySQL   â”‚      â”‚  Redis  â”‚      â”‚  OSS    â”‚
    â”‚ Master  â”‚      â”‚  Cache  â”‚      â”‚  Files  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MySQL   â”‚
    â”‚ Slave   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2026-01-28  
**å¯è§†åŒ–å·¥å…·**: ASCII Art
